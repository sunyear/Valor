<style>
  .full button span {
    background-color: limegreen;
    border-radius: 32px;
    color: black;
  }
  .partially button span {
    background-color: orange;
    border-radius: 32px;
    color: black;
  }

  .marco {
    /*position: relative;*/
    padding: 45px 15px 15px;
    margin: 0 -15px 15px;
    border-color: #e5e5e5 #eee #eee;
    border-style: solid;
    border-width: 1px 0;
    -webkit-box-shadow: inset 0 3px 6px rgba(0,0,0,.05);
    box-shadow: inset 0 3px 6px rgba(0,0,0,.05);
	}



</style>


<div class="panel panel-primary" style="width:100%; margin-top:5px">
	<div class="panel-heading">
	     <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" >
	     	<form class="navbar-form navbar-left" style="width: 100%">
		        <div class="form-group form-group-sm pull-left" style="width: 100%">
		          <input type="text" class="form-control pull-left" ng-model="busqueda.nroLote" placeholder="Lote Nro" style="width: 100%">
		        </div>
	        <!--<button type="submit" class="btn btn-sm btn-default">Submit</button>-->
	      	</form>
	      </div>
	</div>
	<div class="panel-body">
					<!-- Collect the nav links, forms, and other content for toggling -->

				<div style="position: relative; float: left; height:auto; width:20%;">
					<div class="panel panel-default" style="width:100%; height: 700px;margin-top:5px">
						<div class="panel-heading">
							<div style="width:50%;position: relative; left:25%">
						    	<button type="button" class="btn btn-danger btn-lg btn-block" ng-click="vm.cargarLote()">Cargar LOTE</button>
						    </div>
						</div>
						<div class="panel-body">
								<div class="list-group">
								  <a href="#" class="list-group-item">Lotes/Actas</a>
								  <a href="#" class="list-group-item">Imposiciones</a>
								  <a href="#" class="list-group-item">Novedades</a>
								</div>
						</div>
					</div>
				</div>
				<div style="position: relative; float: right; height:auto; width:80%;">
					<div class="panel panel-default" style="width:100%; height: 700px;margin-top:5px">
						<div class="panel-heading">
						    <h3 class="panel-title">Historial</h3>
						</div>
						<div class="panel-body">



							<form name="outerForm" class="tab-form-demo">
							    <uib-tabset active="activeForm">
							      <uib-tab index="0" heading="Todos los lotes" >
							        <ng-form name="nestedForm">
							          <div class="form-group" style="margin-top: 20px">
							            <input type="text" class="form-control" required ng-model="model.name"/>
							          </div>
							        </ng-form>
							        <uib-accordion close-others="true" style="font-size: 12px !important;">
				<div uib-accordion-group class="panel " ng-class="(registro.id_estado_lote == 2)?'panel-danger':(registro.id_estado_lote == 3)?'panel-warning':(registro.id_estado_lote == 4)?'panel-info':'panel-success'" is-disabled="false" ng-repeat="registro in vm.arr_hist | filter:busqueda" ng-click="vm.obtenerLote(registro.nro_lote)">
                      <uib-accordion-heading style="cursor:pointer" >
                         <h5 class="label " ng-class="vm.claseEstadoLote(registro.id_estado_lote, 'label')" style="font-size: 10px !important;">LOTE {{registro.nro_lote}}</h5> <h5 class="label" ng-class="vm.claseEstadoLote(registro.id_estado_lote, 'label')" style="font-size: 10px !important;">{{registro.estado_lote}}</h5> <h5 class="label" ng-class="vm.claseEstadoLote(registro.id_estado_lote, 'label')" style="font-size: 10px !important;">{{registro.proceso}}</h5><i ng-style="{'color':(registro.id_estado_lote == 2)?'red':(registro.id_estado_lote == 3)?'orange':(registro.id_estado_lote==4)?'#00b3b3':'green'}" class="glyphicon pull-right" ng-class="(registro.id_estado_lote == 2)?'glyphicon-remove':(registro.id_estado_lote == 3)?'glyphicon-exclamation-sign':(registro.id_estado_lote==4)?'glyphicon-time':'glyphicon-ok'"></i><span class="text-info pull-right" style="font-size: 11px; margin-right:10px;" am-time-ago="registro.fecha_validado"></span>
                      </uib-accordion-heading>    
							 <div class="btn-group" uib-dropdown>
							      <button id="single-button-lote" type="button" class="btn btn-sm btn-primary" uib-dropdown-toggle ng-disabled="disabled">
							        Opciones <span class="caret"></span>
							      </button>
							      <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button-lote">

							        <li role="menuitem"><a href="#">Notificar</a></li>
							        <li class="divider"></li>
							        <li role="menuitem"><a href="#"><i class="glyphicon glyphicon-trash
	" style="margin-right:5px"></i><span class='text-danger'>Eliminar lote</span></a></li>
							      </ul>
						    </div>

                            <ul class="list-group">
                            	<li class="list-group-item">
                                    <span class="badge" style="font-size: 10px !important;">{{registro.nombre_archivo_csv}}</span>
                                        Archivo 
                                 </li>
                                <li class="list-group-item">
                                    <span class="badge" style="font-size: 10px !important;">{{registro.fecha_lote | amDateFormat : 'DD-MM-YYYY'}}</span>
                                        Fecha lote 
                                 </li>
                                  <li class="list-group-item">
                                    <span class="badge" style="font-size: 10px !important;">{{registro.fecha_validado | amDateFormat : 'DD-MM-YYYY'}}</span>
                                        Fecha Prevalidacion 
                                 </li>

                                <li class="list-group-item">
                                    <span class="badge" style="font-size: 10px !important;">{{registro.nro_registros}}</span>
                                        Registros 
                                 </li>
                                 <li class="list-group-item">
                                    <span class="badge badge-warning" style="font-size: 10px !important;">{{registro.registros_r}}</span>
                                        Registros rechazados 
                                 </li>
                                 <li class="list-group-item" style="text-align: center">
                                 		<div style="display: inline-block;">
                                 			<ul class="list-group">
				                            	<li class="list-group-item" ng-repeat="rechazo in registro.lotes_causas_r track by $index">
				                            		{{vm.validaciones[rechazo]}} 
				                                </li>
				                            </ul>
                                 		</div>
                                 		<div class="btn-group btn-group-justified" role="group">
									        <div class="btn-group" role="group" ng-repeat="proceso in vm.lote_procesos track by $index">
									            <button type="button" class="btn btn-sm btn-default" ng-style="proceso.style_str_largo">{{proceso.proceso}}</button>
									        </div>
									        <!--
									        <div class="btn-group" role="group">
									            <button type="button" class="btn btn-sm btn-default">SIJAI</button>
									        </div>
									        <div class="btn-group" role="group">
									            <button type="button" class="btn btn-sm btn-default">CALIDAD</button>
									        </div>
									        -->
									    </div>
									    <div class="btn-group btn-group-justified" role="group">
									        <div class="btn-group" role="group" ng-repeat="proceso in vm.lote_procesos track by $index" uib-dropdown>

									        <button id="button-template-url" type="button" class="btn btn-sm" uib-dropdown-toggle ng-disabled="disabled" ng-class="(proceso.estado_lote_proceso==1)?'btn-success':(proceso.estado_lote_proceso==2)?'btn-danger':'btn-info'"><i class="glyphicon " ng-class="(proceso.estado_lote_proceso==1)?'glyphicon-ok':(proceso.estado_lote_proceso==2)?'glyphicon-remove':'glyphicon-time'"></i>
										      </button>
										      <ul class="dropdown-menu" uib-dropdown-menu template-url="dropdown_proc.html" aria-labelledby="button-template-url">
										      </ul>
									        	<!--
									            <button type="button " class="btn btn-sm" ng-class="(proceso.estado_lote_proceso==1)?'btn-success':(proceso.estado_lote_proceso==2)?'btn-danger':'btn-default'">
									            <i class="glyphicon " ng-class="(proceso.estado_lote_proceso==1)?'glyphicon-ok':(proceso.estado_lote_proceso==2)?'glyphicon-remove':'glyphicon-time'"></i>
									            </button>
									            -->
									        </div>
									    </div>
									    <!--
									    <div class="btn-group btn-group-justified" role="group">
									        <div class="btn-group" role="group">
									            <button type="button" class="btn btn-sm" ng-class="(registro.estado_proc[0]==1)?'btn-success':(registro.estado_proc[0]==2 || registro.estado_proc[0]==2)?'btn-danger':'btn-default'">
									            <i class="glyphicon" ng-class="(registro.estado_proc[0]==1)?'glyphicon-ok':(registro.estado_proc[0]==2)?'glyphicon-remove':'glyphicon-time'"></i>
									            </button>
									        </div>
									        <div class="btn-group" role="group">
									            <button type="button" class="btn btn-sm" ng-class="(registro.estado_proc[1]==1)?'btn-success':(registro.estado_proc[1]==2)?'btn-danger':'btn-default'">
									            <i class="glyphicon" ng-class="vm.informarEstadoProceso(200, registro.id_proceso, registro.estado_lote_proceso)"></i>
									            </button>
									        </div>
									        <div class="btn-group" role="group">
									            <button type="button" class="btn btn-sm" ng-class="(registro.estado_proc[2]==1)?'btn-success':(registro.estado_proc[2]==2)?'btn-danger':'btn-default'">
									            <i class="glyphicon" ng-class="(registro.estado_proc[2]==1)?'glyphicon-ok':(registro.estado_proc[2]==2)?'glyphicon-remove':'glyphicon-time'"></i>
									            </button>
									        </div>
									        <div class="btn-group" role="group" ng-hide="true">
									            <button type="button" class="btn btn-sm" ng-class="(registro.estado_proc[3]==1)?'btn-success':(registro.estado_proc[3]==2)?'btn-danger':'btn-default'">
									            <i class="glyphicon" ng-class="(registro.estado_proc[3]==1)?'glyphicon-ok':(registro.estado_proc[3]==2)?'glyphicon-remove':'glyphicon-time'"></i>
									            </button>
									        </div>
									    </div>
									    -->
                                 </li>
                            </ul>
                    </div>
                    <!--
                    <div style="width:100%; border-bottom:solid 1px lightgray; margin: 30px 0px 5px 0px">
                    <h5>Lotes anteriores</h5>
                    </div>
                    -->
                    
			</uib-accordion>
							      </uib-tab>
							      <uib-tab index="1" heading="Calidad">
							        <ng-form name="nestedForm1">
							          <div class="form-group">
							            <label>Lote</label>
							            <input type="text" class="form-control" required ng-model="model.name"/>
							          </div>
							        </ng-form>
							      </uib-tab>
							      <uib-tab index="2" heading="Prevalidacion">
							        Some Tab Content
							      </uib-tab>
							      <uib-tab index="3" heading="Precarga">
							        More Tab Content
							      </uib-tab>
							    </uib-tabset>
							  </form>



						</div>
					</div>
				</div>


	</div>
</div>




	<div style="position: relative; float: left; height:auto;width: 70%;">

	<div class="panel panel-primary" style="width:100%; margin-top:5px">
	<div class="panel-heading">
	    <h3 class="panel-title">PROCESAMIENTO DE LOTES: PREVALIDACION</h3>
	</div>
	<div class="panel-body">

		<!-- Single button -->
	    <div class="btn-group" uib-dropdown is-open="status.isopen">
	      <button id="single-button" type="button" class="btn btn-primary" uib-dropdown-toggle ng-disabled="disabled">
	        Acciones <span class="caret"></span>
	      </button>
	      <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
	        <li role="menuitem"><a href="#" ng-click="vm.crearTablaProcesosEstados()">crearTablaProcesosEstados</a></li>
	        <li role="menuitem"><a href="#">Enviar lotes</a></li>
	        <li class="divider"></li>
	        <li role="menuitem"><a href="#" ng-click="vm.borrarDB()">borrar db</a></li>
	      </ul>
	    </div>

	    <hr>

		<form>
			<div class="form-group">
				<label>Fecha Lote: <span class="muted-text">(<em>sumar 5 dias habiles</em>)</span></label>
				<p class="input-group">
					<input type="text" class="form-control" uib-datepicker-popup ng-model="dt" is-open="popup2.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" ng-change="vm.calcularFechas()" />
					<span class="input-group-btn">
						<button type="button" class="btn btn-default" ng-click="open2()"><i class="glyphicon glyphicon-calendar"></i></button>
					</span>
				</p>
			</div>

			<ul class="list-group">
			  <li class="list-group-item">
			    <span class="badge">{{vm.fecha_const_calc | amDateFormat : 'DD-MM-YYYY'}}</span>
			    Fecha lote (-60 dias: constatacion)
			  </li>
			  <li class="list-group-item">
			    <span class="badge">{{vm.fecha_venc_calc | amDateFormat : 'DD-MM-YYYY'}}</span>
			    Fecha lote (+45 dias: vencimiento)
			  </li>
			</ul>

			
		</form>

		<div class="panel panel-primary">
			<div class="panel-heading">
				    <h3 class="panel-title">Datos del CSV</h3>
			</div>
			<div class="panel-body">
			<div class="p+ pt0">
			    <lx-file-input lx-label="Seleccionar CSV..." lx-callback="vm.manageFile(newFile)"></lx-file-input>
			</div>
				<label for="exampleInputFile">Cargar archivo CSV</label>
			<input type="file" id="exampleInputFile" on-read-file="leerCSV(contents)">
				<ul class="list-group">
					<li class="list-group-item">
				    	<span class="badge">{{vm.nro_lote}}</span>
				    		Lote N° 
				 	 </li>
					<li class="list-group-item">
				    	<span class="badge">{{vm.CSVFilename || 'No hay CSV cargado'}}</span>
				    		Nombre 
				 	 </li>
		 			 <li class="list-group-item">
				    	<span class="badge">{{vm.registrosTotales || 0}}</span>
				    		Registros totales 
				 	 </li>
				</ul>
			</div>
			<div class="panel-footer" style="text-align: center;">
		  		<div style="width:100%; height:100%">
		  			<button type="button" class="btn btn-primary btn-lg" ng-click="vm.procesarLote()" ng-disabled="vm.btnProcesarDisabled">Procesar lote</button>
		  		</div>
		  	</div>
		</div>

</div>  

	</div>
</div>



  
<script type="text/ng-template" id="dropdown.html">
        <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="button-template-url">
          <h5 class="dropdown-header bg-info">PRE-VALIDADOR</h5>
          <li class="menuitem" style="padding:3px">
	          <div class="btn-group btn-group-justified" role="group"> 
	        	<label class="btn btn-sm btn-default" ng-model="radioModel" uib-btn-radio="'Left'" bui-uncheckable="false">OK</label>
	        	<label class="btn btn-sm btn-default" ng-model="radioModel" uib-btn-radio="'Middle'" uib-uncheckable="false">ERR</label>
	        	<label class="btn btn-sm btn-default" ng-model="radioModel" uib-btn-radio="'Right'" uib-uncheckable="false">ALL</label>
	        	</div>
	    	</li>
	    	<li class="divider"></li>
	    	<h6 class="dropdown-header">CONTROL DE CALIDAD</h6>
          <li class="menuitem" style="padding:3px">
	          <div class="btn-group btn-group-justified" role="group"> 
	        	<label class="btn btn-sm btn-default" ng-model="radioModel" uib-btn-radio="'Left'" bui-uncheckable="false">OK</label>
	        	<label class="btn btn-sm btn-default" ng-model="radioModel" uib-btn-radio="'Middle'" uib-uncheckable="false">ERR</label>
	        	<label class="btn btn-sm btn-default" ng-model="radioModel" uib-btn-radio="'Right'" uib-uncheckable="false">ALL</label>
	        	</div>
	    	</li>
	    	<li class="divider"></li>
	    	<h6 class="dropdown-header">VALIDADOR SEJAI</h6>
          <li class="menuitem" style="padding:3px">
	          <div class="btn-group btn-group-justified" role="group"> 
	        	<label class="btn btn-sm btn-default" ng-model="radioModel" uib-btn-radio="'Left'" bui-uncheckable="false">OK</label>
	        	<label class="btn btn-sm btn-default" ng-model="radioModel" uib-btn-radio="'Middle'" uib-uncheckable="false">ERR</label>
	        	<label class="btn btn-sm btn-default" ng-model="radioModel" uib-btn-radio="'Right'" uib-uncheckable="false">ALL</label>
	        	</div>
	    	</li>
	    	<li class="divider"></li>
	    	<li class="menuitem" style="padding:3px">
	    	<button type="button" class="btn btn-primary btn-sm btn-block">Filtrar</button>
	    	</li>
        </ul>
    </script>


      <script type="text/ng-template" id="dropdown_proc.html">
        <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="button-template-url" style="font-size: 12px;">
          <li role="menuitem"><a href="#" class="text-danger" style="font-weight: 700"><i class="glyphicon glyphicon-ok" style="font-size:16px;margin-right:10px; color: green"></i>Aceptar lote</a></li>
          <li role="menuitem" class="disabled"><a href="#" class="text-danger" style="font-weight: bold"><i class="glyphicon glyphicon-exclamation-sign" style="font-size:16px;margin-right:10px; color: orange"></i>Aceptar lote (OBSERVADO)</a></li>
          <li role="menuitem"><a href="#" class="text-danger" style="font-weight: bold"><i class="glyphicon glyphicon-remove" style="font-size:16px;margin-right:10px; color: red"></i>Rechazar lote</a></li>
          <li class="divider"></li>
          <li role="menuitem"><a href="#" class="text-danger" style="font-weight: 700"><i class="glyphicon glyphicon-list-alt
" style="font-size:16px;margin-right:10px; color: black"></i>Ver registros rechazados</a></li>
          
        </ul>
    </script>
